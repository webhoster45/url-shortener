<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Url shortener</title>
<style>
      body{
        align-items: center;
        justify-content: center;
        /* height: 100vh; */
        display: flex;
        font-family: Arial, Helvetica, sans-serif;
        flex-direction: column;
      }

      form{
        
      }

      h3{
        color: rgb(16, 105, 43);
      }

      #form{
        max-width: 900px;
        box-shadow: 0 0 12px rgb(0,0,0,0.5);
        padding: 40px;
        border-radius: 12px;

      }
      #btn{
        width: 40%;
        padding: 6px;
        border: none;
        box-shadow: 0 0 12px rgb(0,0,0,0.1);
        border-radius: 5px;
        color: white;
        background-color: rgb(16, 105, 43);
        font-weight: 700;
      }

      
      #text{
        height: 28px;
        border: none;
        box-shadow: 0 0 12px rgb(0,0,0,0.5);
        padding: 8px;
        border-radius: 12px;
      }
 

      #thesection{
      }

      #thesection div{
        display: flex;
        gap: 120px;
        box-shadow: 0 0 12px rgb(0,0,0,0.5);
        padding: 9px;
        border-radius: 15px;
        max-width: 800px;
      }
      #thesection div p{
        font-weight: bold;
        color: rgb(16, 105, 43);
      }
      #thesection div a{
        /* padding-top: 17px; */
        /* text-decoration: none;
        color: white;
        background-color: blue; */
        padding: 6px;
        /* border-radius: 5px; */
        height: 19px;
        margin-top: 11px;
        font-size: 13px;
        font-weight: bold;
      }
    </style>
</head>
<body><br><br>
  <h3>Url shortener</h3>
  <!-- action="/upload"    method="post" -->
    <form id="form">
  <!-- <label for="file-upload">Select file:</label> -->

  <center>
      <input type="url" id="text" placeholder="Enter long url"/><br><br>
  
      <input type="submit" id="btn" value="Shorten">
  </center>

</form>

</section>
<br>
<section id="thesection">
  <!-- <div id="div">  <p>Your new link:</p> <a href="">ere</a></div> -->

</section>
</body>
<script>
  const section = document.getElementById("thesection");


  const form = document.getElementById("form");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const input = document.getElementById("text").value;


    if (!input) {
      alert("File in the input box");
      return;
    }



    try {
      const response = await fetch("http://localhost:5000/shorten", {
        headers:{'Content-Type':'application/json'},
        method: "POST",
        body: JSON.stringify({url:input}),
      });

      if (!response.ok) {
        throw new Error("Failed");
      }

      const data = await response.json();
      // alert(data.newlink);
        const p=document.createElement('p');
  const a=document.createElement('a');
    const div=document.createElement('div');
    const br=document.createElement('Br')
  
  const link=`http:localhost:5000/${data.newlink}`
  p.textContent="Your new Link:";
  a.href=link;
  a.textContent=link;
  p.append(a);
  div.innerHTML='';
  div.append(p);
  div.append(a);
  section.append(br)
  section.append(div)
    } catch (err) {
      console.log("Error:", err);
    }
  });
</script>

</html>
